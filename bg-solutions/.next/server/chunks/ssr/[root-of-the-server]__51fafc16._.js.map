{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/utils/supabaseClient.ts"],"sourcesContent":["// utils/supabaseClient.ts\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = 'https://cyhfugcwkgzcceadtzfw.supabase.co'; // coloque a sua url\r\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN5aGZ1Z2N3a2d6Y2NlYWR0emZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNDcyNzIsImV4cCI6MjA2MzkyMzI3Mn0.nxtN0yKyarDzGD991tcGC3DQnVt2GFxeLCzAPmJyYn8'; // coloque sua anon key\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;AAC1B;;AAEA,MAAM,cAAc,4CAA4C,oBAAoB;AACpF,MAAM,kBAAkB,oNAAoN,uBAAuB;AAE5P,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/Header.tsx"],"sourcesContent":["import { LogOut } from 'lucide-react';\r\n\r\nexport default function Header({ user, onLogout }: { user?: string, onLogout?: () => void }) {\r\n  return (\r\n    <header className=\"w-full bg-white shadow flex items-center justify-between px-8 py-4\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <img src=\"/logo-bgsolutions.png\" alt=\"Logo\" className=\"w-8 h-8 rounded-full\" />\r\n        <span className=\"font-bold text-xl text-blue-700\">BG Solutions</span>\r\n      </div>\r\n      <div className=\"flex items-center gap-4\">\r\n        {user && <span className=\"text-gray-700\">Bem-vindo, {user.split(' ')[0]}</span>}\r\n        {onLogout && (\r\n          <button\r\n            className=\"flex items-center gap-2 text-blue-600 hover:underline\"\r\n            onClick={onLogout}\r\n          >\r\n            <LogOut size={18} /> Sair\r\n          </button>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,OAAO,EAAE,IAAI,EAAE,QAAQ,EAA4C;IACzF,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,KAAI;wBAAwB,KAAI;wBAAO,WAAU;;;;;;kCACtD,8OAAC;wBAAK,WAAU;kCAAkC;;;;;;;;;;;;0BAEpD,8OAAC;gBAAI,WAAU;;oBACZ,sBAAQ,8OAAC;wBAAK,WAAU;;4BAAgB;4BAAY,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;;oBACtE,0BACC,8OAAC;wBACC,WAAU;wBACV,SAAS;;0CAET,8OAAC,0MAAA,CAAA,SAAM;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;AAMhC","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/sidebar.tsx"],"sourcesContent":["// app/components/Sidebar.tsx\r\nimport {\r\n  Home,\r\n  QrCode,\r\n  MessageCircle,\r\n  Users,\r\n  GitBranch,\r\n  Settings,\r\n  LogOut\r\n} from 'lucide-react';\r\n\r\nconst MENU = [\r\n  { label: 'Dashboard', icon: <Home size={20} />, key: 'dashboard' },\r\n  { label: 'Conectar WhatsApp', icon: <QrCode size={20} />, key: 'qrcode' },\r\n  { label: 'WhatsApp', icon: <MessageCircle size={20} />, key: 'whatsapp' },\r\n  { label: 'CRM', icon: <Users size={20} />, key: 'crm' },\r\n  { label: 'Fluxograma', icon: <GitBranch size={20} />, key: 'fluxograma' },\r\n  { label: 'Configurações', icon: <Settings size={20} />, key: 'config' },\r\n];\r\n\r\ntype SidebarProps = {\r\n  current: string;\r\n  onSelect: (key: string) => void;\r\n  onLogout?: () => void;\r\n};\r\n\r\nexport default function Sidebar({ current, onSelect, onLogout }: SidebarProps) {\r\n  return (\r\n    <aside className=\"bg-blue-700 w-44 min-h-screen text-white flex flex-col py-8 px-2 shadow-lg\">\r\n      <span className=\"font-extrabold text-xl mb-10 tracking-tight px-3\">\r\n        <span className=\"text-white\">BG</span>\r\n        <span className=\"text-gray-300\">Solutions</span>\r\n      </span>\r\n      <nav className=\"flex-1 space-y-1\">\r\n        {MENU.map(item => (\r\n          <button\r\n            key={item.key}\r\n            className={`flex items-center w-full px-4 py-2.5 rounded-lg transition font-semibold ${\r\n              current === item.key ? 'bg-blue-900' : 'hover:bg-blue-800'\r\n            }`}\r\n            onClick={() => onSelect(item.key)}\r\n          >\r\n            {item.icon}\r\n            <span className=\"ml-2 text-[15px]\">{item.label}</span>\r\n          </button>\r\n        ))}\r\n      </nav>\r\n      <button\r\n        className=\"flex items-center gap-2 mt-10 mb-2 text-red-200 hover:text-red-400 transition px-3\"\r\n        onClick={onLogout || (() => {})}\r\n      >\r\n        <LogOut size={18} /> Sair\r\n      </button>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAC7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAUA,MAAM,OAAO;IACX;QAAE,OAAO;QAAa,oBAAM,8OAAC,mMAAA,CAAA,OAAI;YAAC,MAAM;;;;;;QAAQ,KAAK;IAAY;IACjE;QAAE,OAAO;QAAqB,oBAAM,8OAAC,0MAAA,CAAA,SAAM;YAAC,MAAM;;;;;;QAAQ,KAAK;IAAS;IACxE;QAAE,OAAO;QAAY,oBAAM,8OAAC,wNAAA,CAAA,gBAAa;YAAC,MAAM;;;;;;QAAQ,KAAK;IAAW;IACxE;QAAE,OAAO;QAAO,oBAAM,8OAAC,oMAAA,CAAA,QAAK;YAAC,MAAM;;;;;;QAAQ,KAAK;IAAM;IACtD;QAAE,OAAO;QAAc,oBAAM,8OAAC,gNAAA,CAAA,YAAS;YAAC,MAAM;;;;;;QAAQ,KAAK;IAAa;IACxE;QAAE,OAAO;QAAiB,oBAAM,8OAAC,0MAAA,CAAA,WAAQ;YAAC,MAAM;;;;;;QAAQ,KAAK;IAAS;CACvE;AAQc,SAAS,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAgB;IAC3E,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAK,WAAU;kCAAa;;;;;;kCAC7B,8OAAC;wBAAK,WAAU;kCAAgB;;;;;;;;;;;;0BAElC,8OAAC;gBAAI,WAAU;0BACZ,KAAK,GAAG,CAAC,CAAA,qBACR,8OAAC;wBAEC,WAAW,CAAC,yEAAyE,EACnF,YAAY,KAAK,GAAG,GAAG,gBAAgB,qBACvC;wBACF,SAAS,IAAM,SAAS,KAAK,GAAG;;4BAE/B,KAAK,IAAI;0CACV,8OAAC;gCAAK,WAAU;0CAAoB,KAAK,KAAK;;;;;;;uBAPzC,KAAK,GAAG;;;;;;;;;;0BAWnB,8OAAC;gBACC,WAAU;gBACV,SAAS,YAAY,CAAC,KAAO,CAAC;;kCAE9B,8OAAC,0MAAA,CAAA,SAAM;wBAAC,MAAM;;;;;;oBAAM;;;;;;;;;;;;;AAI5B","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/Dashboard.tsx"],"sourcesContent":["// app/components/Dashboard.tsx\r\nimport { BarChart3, Users, MessageCircle, Zap, CheckCircle } from 'lucide-react';\r\n\r\nexport default function Dashboard() {\r\n  return (\r\n    <div className=\"w-full max-w-5xl mx-auto\">\r\n      <h1 className=\"text-3xl font-bold mb-6 text-blue-700\">Visão Geral</h1>\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-7 mb-10\">\r\n        {/* Card: Clientes Ativos */}\r\n        <div className=\"bg-white rounded-xl shadow p-7 flex items-center gap-4\">\r\n          <div className=\"bg-blue-100 p-4 rounded-full\">\r\n            <Users size={30} className=\"text-blue-600\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-500 text-sm\">Clientes Ativos</p>\r\n            <span className=\"text-2xl font-bold text-blue-700\">18</span>\r\n          </div>\r\n        </div>\r\n        {/* Card: Mensagens no Mês */}\r\n        <div className=\"bg-white rounded-xl shadow p-7 flex items-center gap-4\">\r\n          <div className=\"bg-green-100 p-4 rounded-full\">\r\n            <MessageCircle size={30} className=\"text-green-600\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-500 text-sm\">Mensagens (Mês)</p>\r\n            <span className=\"text-2xl font-bold text-green-700\">12.400</span>\r\n          </div>\r\n        </div>\r\n        {/* Card: Status de Conexão */}\r\n        <div className=\"bg-white rounded-xl shadow p-7 flex items-center gap-4\">\r\n          <div className=\"bg-indigo-100 p-4 rounded-full\">\r\n            <CheckCircle size={30} className=\"text-indigo-600\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-500 text-sm\">Status WhatsApp</p>\r\n            <span className=\"text-2xl font-bold text-indigo-700 flex items-center gap-2\">\r\n              Conectado <span className=\"w-3 h-3 bg-green-500 rounded-full inline-block\"></span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Gráfico ou métricas (placeholder) */}\r\n      <div className=\"bg-white rounded-xl shadow p-8 flex flex-col items-center\">\r\n        <BarChart3 size={44} className=\"text-blue-600 mb-2\" />\r\n        <h2 className=\"text-lg font-semibold mb-2\">Resumo de Atendimentos</h2>\r\n        <p className=\"text-gray-500 mb-6\">Em breve: gráficos de crescimento, volume de mensagens e desempenho do atendimento ao cliente.</p>\r\n        <div className=\"h-32 w-full flex items-center justify-center text-gray-300\">\r\n          {/* Aqui pode entrar seu gráfico ou KPI */}\r\n          [ Gráfico aqui ]\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;AAC/B;AAAA;AAAA;AAAA;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;0BAEtD,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAE7B,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAK,WAAU;kDAAmC;;;;;;;;;;;;;;;;;;kCAIvD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,wNAAA,CAAA,gBAAa;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAErC,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAK,WAAU;kDAAoC;;;;;;;;;;;;;;;;;;kCAIxD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,2NAAA,CAAA,cAAW;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAEnC,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAK,WAAU;;4CAA6D;0DACjE,8OAAC;gDAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOlC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,kNAAA,CAAA,YAAS;wBAAC,MAAM;wBAAI,WAAU;;;;;;kCAC/B,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAClC,8OAAC;wBAAI,WAAU;kCAC8B;;;;;;;;;;;;;;;;;;AAMrD","debugId":null}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/QrCodeWhatsApp.tsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\r\n\r\ntype StatusType = \"loading\" | \"waiting\" | \"isLogged\" | \"expired\" | \"error\";\r\n\r\ninterface QrCodeWppProps {\r\n  usuarioId: string; // Passe o ID do usuário do Supabase!\r\n}\r\n\r\nexport function QrCodeWpp({ usuarioId }: QrCodeWppProps) {\r\n  const [qrcode, setQrcode] = useState<string | null>(null);\r\n  const [status, setStatus] = useState<StatusType>(\"loading\");\r\n  const [erro, setErro] = useState<string>(\"\");\r\n  const [phone, setPhone] = useState<string | null>(null);\r\n\r\n  const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\r\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  // --- CRIAR SESSÃO ---\r\n  const criarSessao = async () => {\r\n    setStatus(\"loading\");\r\n    setQrcode(null);\r\n    setErro(\"\");\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/usuarios/${usuarioId}/criar-sessao`, {\r\n        method: \"POST\",\r\n      });\r\n      const data = await res.json();\r\n      if (data.qr) {\r\n        setQrcode(data.qr);\r\n        setStatus(\"waiting\");\r\n      } else if (data.status === \"Já existe sessão\") {\r\n        setQrcode(data.qr || null);\r\n        setStatus(\"waiting\");\r\n      } else {\r\n        setErro(data.error || \"Erro ao gerar QR Code.\");\r\n        setStatus(\"error\");\r\n        return;\r\n      }\r\n      iniciarPolling();\r\n    } catch (err) {\r\n      setErro(\"Erro ao criar sessão.\");\r\n      setStatus(\"error\");\r\n    }\r\n  };\r\n\r\n  // --- CHECAR STATUS ---\r\n  const checarStatus = async () => {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/usuarios/${usuarioId}/status`);\r\n      const data = await res.json();\r\n\r\n      if (data.qr) setQrcode(data.qr);\r\n      if (data.number) setPhone(data.number);\r\n\r\n      if (\r\n        data.status === \"isLogged\" ||\r\n        data.status === \"CONNECTED\" ||\r\n        data.status === \"qrReadSuccess\"\r\n      ) {\r\n        setStatus(\"isLogged\");\r\n        pararPolling();\r\n        return;\r\n      }\r\n      if (\r\n        data.status === \"autocloseCalled\" ||\r\n        data.status === \"browserClose\" ||\r\n        data.status === \"qrReadError\" ||\r\n        data.error\r\n      ) {\r\n        setStatus(\"expired\");\r\n        pararPolling();\r\n        return;\r\n      }\r\n    } catch (err) {\r\n      setErro(\"Erro ao checar status da sessão.\");\r\n      setStatus(\"error\");\r\n      pararPolling();\r\n    }\r\n  };\r\n\r\n  // Polling (checa status a cada 2s)\r\n  const iniciarPolling = () => {\r\n    pararPolling();\r\n    intervalRef.current = setInterval(checarStatus, 2000);\r\n    timeoutRef.current = setTimeout(() => {\r\n      setStatus(\"expired\");\r\n      pararPolling();\r\n    }, 120000);\r\n  };\r\n  const pararPolling = () => {\r\n    if (intervalRef.current) clearInterval(intervalRef.current);\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n  };\r\n\r\n  // Sempre que usuarioId mudar, cria sessão\r\n  useEffect(() => {\r\n    if (!usuarioId) return;\r\n    criarSessao();\r\n    return pararPolling;\r\n    // eslint-disable-next-line\r\n  }, [usuarioId]);\r\n\r\n  // Botão de tentar de novo\r\n  const handleRetry = () => {\r\n    criarSessao();\r\n  };\r\n\r\n  // --- DESCONECTAR ---\r\n  const handleDisconnect = async () => {\r\n    setStatus(\"loading\");\r\n    setErro(\"\");\r\n    try {\r\n      await fetch(`http://localhost:5000/usuarios/${usuarioId}/desconectar`, {\r\n        method: \"POST\",\r\n      });\r\n      criarSessao();\r\n    } catch {\r\n      setErro(\"Erro ao desconectar.\");\r\n      setStatus(\"error\");\r\n    }\r\n  };\r\n\r\n  // ----------- CORREÇÃO DO QR CODE -------------\r\n  let qrCodeImg = qrcode;\r\n  if (qrCodeImg && !qrCodeImg.startsWith(\"data:image\")) {\r\n    qrCodeImg = \"data:image/png;base64,\" + qrCodeImg;\r\n  }\r\n  // ---------------------------------------------\r\n\r\n  // --- DESIGN / UI ---\r\n  if (status === \"error\")\r\n    return (\r\n      <div className=\"p-6 bg-red-50 border border-red-200 text-red-700 font-bold rounded-xl flex flex-col items-center\">\r\n        {erro || \"Erro ao gerar QR Code.\"}\r\n        <button onClick={handleRetry} className=\"mt-4 px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700\">\r\n          Tentar Novamente\r\n        </button>\r\n      </div>\r\n    );\r\n\r\n  if (status === \"expired\")\r\n    return (\r\n      <div className=\"p-6 bg-yellow-50 border border-yellow-200 text-yellow-700 font-bold rounded-xl flex flex-col items-center\">\r\n        QR Code expirado ou sessão fechada.<br />\r\n        <button onClick={handleRetry} className=\"mt-4 px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700\">\r\n          Gerar Novo QR Code\r\n        </button>\r\n      </div>\r\n    );\r\n\r\n  if (status === \"isLogged\")\r\n    return (\r\n      <div className=\"bg-white rounded-xl border border-green-200 shadow-md p-8 flex flex-col gap-3 items-start max-w-xl\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <svg width={32} height={32} fill=\"none\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#dcfce7\"/><path stroke=\"#16a34a\" strokeWidth=\"2\" d=\"M7 13.5l3 3 6-6\"/></svg>\r\n          <div>\r\n            <div className=\"text-xl font-bold text-green-700\">Automação está ligada</div>\r\n            <div className=\"mt-1 text-gray-700 text-sm\">\r\n              O número de WhatsApp <span className=\"font-medium text-blue-700\">{phone || \"-\"}</span> está conectado à sua conta.\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-gray-500 mt-2 mb-3 text-sm\">\r\n          Seu WhatsApp foi conectado com sucesso. Automação continuará funcionando mesmo com o celular desligado.\r\n          <br />Porém, se não acessar o aplicativo do WhatsApp nos próximos 14 dias, seu telefone será desconectado automaticamente pelo WhatsApp por motivos de segurança.\r\n        </div>\r\n        <button\r\n          className=\"self-end px-6 py-2 rounded-lg bg-red-100 text-red-700 font-semibold hover:bg-red-200 transition\"\r\n          onClick={handleDisconnect}\r\n        >\r\n          Desconectar\r\n        </button>\r\n      </div>\r\n    );\r\n\r\n  // Carregando ou esperando QR\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-3 p-6 bg-white rounded-xl border border-blue-100 shadow max-w-lg\">\r\n      <div className=\"font-semibold text-blue-900 text-lg mb-2\">\r\n        {status === \"loading\" ? \"Gerando QR code...\" : \"Escaneie o QR code com o WhatsApp\"}\r\n      </div>\r\n      {qrCodeImg ? (\r\n        <img src={qrCodeImg} alt=\"QR Code do WhatsApp\" className=\"w-64 h-64 border rounded-xl\" />\r\n      ) : (\r\n        <div className=\"text-gray-400 text-base\">Aguardando QR code...</div>\r\n      )}\r\n      <div className=\"text-xs text-gray-400 mt-2\">O QR code é atualizado automaticamente se expirar.</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 885, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/WppSidebar.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\ninterface Conversation {\r\n  id: string;\r\n  name?: string;\r\n  lastMessage?: string;\r\n  unreadCount?: number;\r\n}\r\n\r\ninterface WppSidebarProps {\r\n  userId: string; // Aqui é o sessionId usado no backend!\r\n  onSelectChat: (chatId: string) => void;\r\n  selectedChat: string | null;\r\n}\r\n\r\nexport function WppSidebar({\r\n  userId,\r\n  onSelectChat,\r\n  selectedChat\r\n}: WppSidebarProps) {\r\n  const [conversations, setConversations] = useState<Conversation[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [erro, setErro] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!userId) return;\r\n\r\n    setLoading(true);\r\n    setErro(\"\");\r\n    setConversations([]);\r\n\r\n    // Usa sessionId (userId) corretamente na rota\r\n    fetch(`http://localhost:5000/chats/${userId}`)\r\n      .then(res => {\r\n        if (!res.ok) throw new Error(\"Erro ao buscar conversas.\");\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        // Pode vir array de objetos do WhatsApp Web!\r\n        // Adapte se quiser padronizar os campos exibidos:\r\n        setConversations(\r\n          Array.isArray(data)\r\n            ? data.map((chat: any) => ({\r\n                id: chat.id,\r\n                name: chat.name || chat.formattedTitle || chat.id.split(\"@\")[0],\r\n                lastMessage: chat.lastMessage?.body || \"\",\r\n                unreadCount: chat.unreadCount || 0,\r\n              }))\r\n            : []\r\n        );\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setErro(\"Falha ao carregar conversas.\");\r\n        setLoading(false);\r\n        console.error(\"Erro ao buscar conversas:\", err);\r\n      });\r\n  }, [userId]);\r\n\r\n  return (\r\n    <aside className=\"w-72 bg-white border-r border-blue-200 flex flex-col\">\r\n      <header className=\"p-4 border-b border-blue-200 font-bold text-blue-700 text-xl bg-gradient-to-r from-blue-100 to-blue-200\">\r\n        BGConversas\r\n      </header>\r\n      <ul className=\"flex-1 overflow-y-auto\">\r\n        {loading ? (\r\n          <li className=\"p-4 text-blue-400\">Carregando conversas...</li>\r\n        ) : erro ? (\r\n          <li className=\"p-4 text-red-600\">{erro}</li>\r\n        ) : conversations.length === 0 ? (\r\n          <li className=\"p-4 text-gray-400\">Nenhuma conversa encontrada.</li>\r\n        ) : (\r\n          conversations.map(conv => (\r\n            <li\r\n              key={conv.id}\r\n              onClick={() => onSelectChat(conv.id)}\r\n              className={`p-4 border-b border-blue-50 hover:bg-blue-50 cursor-pointer transition ${\r\n                selectedChat === conv.id ? \"bg-blue-100\" : \"\"\r\n              }`}\r\n            >\r\n              <div className=\"font-semibold text-blue-800 truncate\">\r\n                {conv.name || conv.id.split(\"@\")[0]}\r\n              </div>\r\n              {conv.lastMessage && (\r\n                <div className=\"text-sm text-blue-400 truncate\">\r\n                  {conv.lastMessage}\r\n                </div>\r\n              )}\r\n              {!!conv.unreadCount && (\r\n                <span className=\"ml-2 text-xs bg-blue-600 text-white rounded-full px-2 py-0.5\">\r\n                  {conv.unreadCount}\r\n                </span>\r\n              )}\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAeO,SAAS,WAAW,EACzB,MAAM,EACN,YAAY,EACZ,YAAY,EACI;IAChB,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB,EAAE;IACrE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEzC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,QAAQ;QAEb,WAAW;QACX,QAAQ;QACR,iBAAiB,EAAE;QAEnB,8CAA8C;QAC9C,MAAM,CAAC,4BAA4B,EAAE,QAAQ,EAC1C,IAAI,CAAC,CAAA;YACJ,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,OAAO,IAAI,IAAI;QACjB,GACC,IAAI,CAAC,CAAA;YACJ,6CAA6C;YAC7C,kDAAkD;YAClD,iBACE,MAAM,OAAO,CAAC,QACV,KAAK,GAAG,CAAC,CAAC,OAAc,CAAC;oBACvB,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI,IAAI,KAAK,cAAc,IAAI,KAAK,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;oBAC/D,aAAa,KAAK,WAAW,EAAE,QAAQ;oBACvC,aAAa,KAAK,WAAW,IAAI;gBACnC,CAAC,KACD,EAAE;YAER,WAAW;QACb,GACC,KAAK,CAAC,CAAC;YACN,QAAQ;YACR,WAAW;YACX,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACJ,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAO,WAAU;0BAA0G;;;;;;0BAG5H,8OAAC;gBAAG,WAAU;0BACX,wBACC,8OAAC;oBAAG,WAAU;8BAAoB;;;;;2BAChC,qBACF,8OAAC;oBAAG,WAAU;8BAAoB;;;;;2BAChC,cAAc,MAAM,KAAK,kBAC3B,8OAAC;oBAAG,WAAU;8BAAoB;;;;;2BAElC,cAAc,GAAG,CAAC,CAAA,qBAChB,8OAAC;wBAEC,SAAS,IAAM,aAAa,KAAK,EAAE;wBACnC,WAAW,CAAC,uEAAuE,EACjF,iBAAiB,KAAK,EAAE,GAAG,gBAAgB,IAC3C;;0CAEF,8OAAC;gCAAI,WAAU;0CACZ,KAAK,IAAI,IAAI,KAAK,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;4BAEpC,KAAK,WAAW,kBACf,8OAAC;gCAAI,WAAU;0CACZ,KAAK,WAAW;;;;;;4BAGpB,CAAC,CAAC,KAAK,WAAW,kBACjB,8OAAC;gCAAK,WAAU;0CACb,KAAK,WAAW;;;;;;;uBAhBhB,KAAK,EAAE;;;;;;;;;;;;;;;;AAyB1B","debugId":null}},
    {"offset": {"line": 1009, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/WppHeader.tsx"],"sourcesContent":["import { useRef, useState } from \"react\";\r\nimport { X, User } from \"lucide-react\";\r\n\r\ninterface WppHeaderProps {\r\n  contactName: string;\r\n  status?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  photoUrl?: string;\r\n}\r\n\r\nexport function WppHeader({\r\n  contactName,\r\n  status,\r\n  phone,\r\n  email,\r\n  photoUrl,\r\n}: WppHeaderProps) {\r\n  const [showContact, setShowContact] = useState(false);\r\n  const panelRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Utilitário para mostrar iniciais\r\n  function getInitials(name: string) {\r\n    return name\r\n      ? name\r\n          .split(\" \")\r\n          .map((w) => w[0]?.toUpperCase())\r\n          .join(\"\")\r\n          .slice(0, 2)\r\n      : \"?\";\r\n  }\r\n\r\n  // Fecha o painel ao clicar fora\r\n  function handleClickOutside(e: MouseEvent) {\r\n    if (panelRef.current && !panelRef.current.contains(e.target as Node)) {\r\n      setShowContact(false);\r\n    }\r\n  }\r\n\r\n  // Adiciona/remover listener ao abrir/fechar painel\r\n  if (showContact) {\r\n    window.addEventListener(\"mousedown\", handleClickOutside);\r\n  } else {\r\n    window.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }\r\n\r\n  return (\r\n    <header className=\"h-16 bg-gradient-to-r from-blue-700 to-blue-500 flex items-center px-6 justify-between shadow relative\">\r\n      <div className=\"flex items-center gap-3\">\r\n        {/* Botão: Detalhes do contato */}\r\n        <button\r\n          onClick={() => setShowContact(true)}\r\n          className=\"rounded-full w-10 h-10 bg-blue-600 flex items-center justify-center font-bold text-white text-xl uppercase select-none overflow-hidden focus:ring-2 ring-white\"\r\n          title=\"Ver detalhes do contato\"\r\n          aria-label=\"Ver detalhes do contato\"\r\n        >\r\n          {photoUrl ? (\r\n            <img\r\n              src={photoUrl}\r\n              alt={contactName}\r\n              className=\"w-full h-full object-cover rounded-full\"\r\n              onError={(e) => {\r\n                (e.currentTarget as HTMLImageElement).src = \"\";\r\n              }}\r\n            />\r\n          ) : contactName ? (\r\n            getInitials(contactName)\r\n          ) : (\r\n            <User size={24} />\r\n          )}\r\n        </button>\r\n        <span className=\"font-bold text-white text-lg block truncate max-w-xs\">\r\n          {contactName || \"Contato\"}\r\n        </span>\r\n      </div>\r\n      <div className=\"flex gap-3\">{/* Botões extra, se quiser */}</div>\r\n\r\n      {/* Painel lateral do contato */}\r\n      {showContact && (\r\n        <div\r\n          ref={panelRef}\r\n          className=\"absolute top-16 left-6 z-30 bg-white shadow-2xl rounded-xl border w-80 p-6 animate-fade-in\"\r\n        >\r\n          <div className=\"font-bold text-lg mb-2\">\r\n            {contactName || \"Contato\"}\r\n          </div>\r\n          {status && (\r\n            <div className=\"text-xs text-green-700 mb-2\">{status}</div>\r\n          )}\r\n          {(phone || email) && (\r\n            <div className=\"mt-4 text-sm text-gray-700 space-y-1\">\r\n              {phone && (\r\n                <div>\r\n                  <b>Telefone:</b> {phone}\r\n                </div>\r\n              )}\r\n              {email && (\r\n                <div>\r\n                  <b>Email:</b> {email}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          <button\r\n            className=\"absolute top-2 right-2 p-1 rounded hover:bg-gray-100\"\r\n            onClick={() => setShowContact(false)}\r\n            title=\"Fechar\"\r\n            aria-label=\"Fechar detalhes do contato\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;;AAUO,SAAS,UAAU,EACxB,WAAW,EACX,MAAM,EACN,KAAK,EACL,KAAK,EACL,QAAQ,EACO;IACf,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAExC,mCAAmC;IACnC,SAAS,YAAY,IAAY;QAC/B,OAAO,OACH,KACG,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EAAE,eACjB,IAAI,CAAC,IACL,KAAK,CAAC,GAAG,KACZ;IACN;IAEA,gCAAgC;IAChC,SAAS,mBAAmB,CAAa;QACvC,IAAI,SAAS,OAAO,IAAI,CAAC,SAAS,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW;YACpE,eAAe;QACjB;IACF;IAEA,mDAAmD;IACnD,IAAI,aAAa;QACf,OAAO,gBAAgB,CAAC,aAAa;IACvC,OAAO;QACL,OAAO,mBAAmB,CAAC,aAAa;IAC1C;IAEA,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBACC,SAAS,IAAM,eAAe;wBAC9B,WAAU;wBACV,OAAM;wBACN,cAAW;kCAEV,yBACC,8OAAC;4BACC,KAAK;4BACL,KAAK;4BACL,WAAU;4BACV,SAAS,CAAC;gCACP,EAAE,aAAa,CAAsB,GAAG,GAAG;4BAC9C;;;;;mCAEA,cACF,YAAY,6BAEZ,8OAAC,kMAAA,CAAA,OAAI;4BAAC,MAAM;;;;;;;;;;;kCAGhB,8OAAC;wBAAK,WAAU;kCACb,eAAe;;;;;;;;;;;;0BAGpB,8OAAC;gBAAI,WAAU;;;;;;YAGd,6BACC,8OAAC;gBACC,KAAK;gBACL,WAAU;;kCAEV,8OAAC;wBAAI,WAAU;kCACZ,eAAe;;;;;;oBAEjB,wBACC,8OAAC;wBAAI,WAAU;kCAA+B;;;;;;oBAE/C,CAAC,SAAS,KAAK,mBACd,8OAAC;wBAAI,WAAU;;4BACZ,uBACC,8OAAC;;kDACC,8OAAC;kDAAE;;;;;;oCAAa;oCAAE;;;;;;;4BAGrB,uBACC,8OAAC;;kDACC,8OAAC;kDAAE;;;;;;oCAAU;oCAAE;;;;;;;;;;;;;kCAKvB,8OAAC;wBACC,WAAU;wBACV,SAAS,IAAM,eAAe;wBAC9B,OAAM;wBACN,cAAW;kCAEX,cAAA,8OAAC,4LAAA,CAAA,IAAC;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAMrB","debugId":null}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/WppMessages.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  sender: string; // 'me', 'system' ou nome/número do contato\r\n  text: string;\r\n  timestamp?: number;\r\n}\r\n\r\nexport function WppMessages({ messages }: { messages: Message[] }) {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  // Sempre rola até o fim ao atualizar as mensagens\r\n  useEffect(() => {\r\n    if (ref.current) {\r\n      ref.current.scrollTop = ref.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  function formatTime(ts?: number) {\r\n    if (!ts) return \"\";\r\n    const date = new Date(ts * 1000);\r\n    return date.toLocaleTimeString(\"pt-BR\", {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",      \r\n    });\r\n  }\r\n\r\n  if (!messages || messages.length === 0) {\r\n    return (\r\n      <main className=\"flex-1 overflow-y-auto p-6 flex items-center justify-center text-gray-400 bg-gradient-to-br from-blue-50 via-white to-blue-100\">\r\n        Nenhuma mensagem encontrada\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className=\"flex-1 overflow-y-auto p-4 flex flex-col gap-2 bg-gradient-to-br from-blue-50 via-white to-blue-100\"\r\n    >\r\n      {messages.map((msg, i) => (\r\n        <div\r\n          key={msg.id || `msg-${i}`}\r\n          className={`\r\n            max-w-[90%] md:max-w-xs p-3 rounded-2xl shadow group break-words\r\n            ${\r\n              msg.sender === \"me\"\r\n                ? \"bg-blue-200 self-end text-right\"\r\n                : msg.sender === \"system\"\r\n                ? \"bg-gray-200 text-gray-600 self-center text-center text-sm font-medium\"\r\n                : \"bg-white self-start border text-left\"\r\n            }\r\n          `}\r\n        >\r\n          {msg.sender !== \"me\" && msg.sender !== \"system\" && (\r\n            <div className=\"text-xs font-bold text-blue-500 mb-1 truncate max-w-full\">\r\n              {msg.sender}\r\n            </div>\r\n          )}\r\n          <div>{msg.text}</div>\r\n          {msg.timestamp && (\r\n            <div className=\"text-xs text-gray-400 mt-1 group-hover:text-gray-500 transition\">\r\n              {formatTime(msg.timestamp)}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AASO,SAAS,YAAY,EAAE,QAAQ,EAA2B;IAC/D,MAAM,MAAM,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAEnC,kDAAkD;IAClD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,IAAI,OAAO,EAAE;YACf,IAAI,OAAO,CAAC,SAAS,GAAG,IAAI,OAAO,CAAC,YAAY;QAClD;IACF,GAAG;QAAC;KAAS;IAEb,SAAS,WAAW,EAAW;QAC7B,IAAI,CAAC,IAAI,OAAO;QAChB,MAAM,OAAO,IAAI,KAAK,KAAK;QAC3B,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,MAAM;YACN,QAAQ;QACV;IACF;IAEA,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;QACtC,qBACE,8OAAC;YAAK,WAAU;sBAAiI;;;;;;IAIrJ;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAU;kBAET,SAAS,GAAG,CAAC,CAAC,KAAK,kBAClB,8OAAC;gBAEC,WAAW,CAAC;;YAEV,EACE,IAAI,MAAM,KAAK,OACX,oCACA,IAAI,MAAM,KAAK,WACf,0EACA,uCACL;UACH,CAAC;;oBAEA,IAAI,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,0BACrC,8OAAC;wBAAI,WAAU;kCACZ,IAAI,MAAM;;;;;;kCAGf,8OAAC;kCAAK,IAAI,IAAI;;;;;;oBACb,IAAI,SAAS,kBACZ,8OAAC;wBAAI,WAAU;kCACZ,WAAW,IAAI,SAAS;;;;;;;eApBxB,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG;;;;;;;;;;AA2BnC","debugId":null}},
    {"offset": {"line": 1277, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/WppInput.tsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from 'react'\r\nimport { Smile, Plus, Send, Bot, User, Paperclip, FileImage, Video } from 'lucide-react'\r\nimport Picker from '@emoji-mart/react'\r\nimport data from '@emoji-mart/data'\r\n\r\nexport function WppInput({ onSend }: { onSend: (msg: string, system?: boolean) => void }) {\r\n  const [message, setMessage] = useState('')\r\n  const [human, setHuman] = useState(false)\r\n  const [showAttach, setShowAttach] = useState(false)\r\n  const [showEmoji, setShowEmoji] = useState(false)\r\n\r\n  const attachRef = useRef<HTMLDivElement>(null)\r\n  const emojiRef = useRef<HTMLDivElement>(null)\r\n  const emojiButtonRef = useRef<HTMLButtonElement>(null)\r\n  const attachButtonRef = useRef<HTMLButtonElement>(null)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Fecha menus ao clicar fora\r\n  useEffect(() => {\r\n    function handleClick(event: MouseEvent) {\r\n      if (\r\n        showAttach &&\r\n        attachRef.current &&\r\n        !attachRef.current.contains(event.target as Node) &&\r\n        attachButtonRef.current &&\r\n        !attachButtonRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowAttach(false)\r\n      }\r\n      if (\r\n        showEmoji &&\r\n        emojiRef.current &&\r\n        !emojiRef.current.contains(event.target as Node) &&\r\n        emojiButtonRef.current &&\r\n        !emojiButtonRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowEmoji(false)\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClick)\r\n    return () => document.removeEventListener('mousedown', handleClick)\r\n  }, [showAttach, showEmoji])\r\n\r\n  // Alterna menus (nunca ambos abertos)\r\n  const toggleAttach = useCallback(() => {\r\n    setShowAttach(a => {\r\n      if (!a) setShowEmoji(false)\r\n      return !a\r\n    })\r\n  }, [])\r\n\r\n  const toggleEmoji = useCallback(() => {\r\n    setShowEmoji(e => {\r\n      if (!e) setShowAttach(false)\r\n      return !e\r\n    })\r\n    setTimeout(() => inputRef.current?.focus(), 120)\r\n  }, [])\r\n\r\n  // Envia mensagem ao apertar Enter (Shift+Enter quebra linha)\r\n  function handleKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault()\r\n      handleSend(e)\r\n    }\r\n  }\r\n\r\n  function handleSend(e: React.FormEvent | React.KeyboardEvent) {\r\n    e.preventDefault?.()\r\n    if (message.trim()) {\r\n      onSend(message)\r\n      setMessage('')\r\n      setTimeout(() => inputRef.current?.focus(), 100)\r\n    }\r\n  }\r\n\r\n  function toggleHuman() {\r\n    setHuman(h => {\r\n      const novoModo = !h\r\n      onSend(\r\n        novoModo\r\n          ? 'Atendimento humano ativado!'\r\n          : 'Atendimento automático (robô) ativado.',\r\n        true\r\n      )\r\n      return novoModo\r\n    })\r\n  }\r\n\r\n  function handleAttach(type: string) {\r\n    setShowAttach(false)\r\n    onSend(`[Arquivo de ${type} enviado]`, true)\r\n  }\r\n\r\n  function handleEmojiMart(emoji: any) {\r\n    setMessage(m => m + emoji.native)\r\n    setShowEmoji(false)\r\n    setTimeout(() => inputRef.current?.focus(), 100)\r\n  }\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSend}\r\n      className=\"flex items-center gap-2 p-4 border-t bg-white relative\"\r\n      autoComplete=\"off\"\r\n    >\r\n      {/* Botão \"+\" para anexos */}\r\n      <div className=\"relative\">\r\n        <button\r\n          ref={attachButtonRef}\r\n          type=\"button\"\r\n          className=\"p-2 rounded-full hover:bg-gray-100 transition\"\r\n          title=\"Anexar arquivo\"\r\n          onClick={toggleAttach}\r\n        >\r\n          <Plus size={24} />\r\n        </button>\r\n        {showAttach && (\r\n          <div\r\n            ref={attachRef}\r\n            className=\"absolute z-20 bottom-12 left-0 bg-white border shadow-xl rounded-xl min-w-[170px] flex flex-col animate-fade-in\"\r\n          >\r\n            <button className=\"flex items-center gap-2 px-4 py-3 hover:bg-blue-50\" type=\"button\" onClick={() => handleAttach('imagem')}>\r\n              <FileImage size={20} /> Imagem\r\n            </button>\r\n            <button className=\"flex items-center gap-2 px-4 py-3 hover:bg-blue-50\" type=\"button\" onClick={() => handleAttach('vídeo')}>\r\n              <Video size={20} /> Vídeo\r\n            </button>\r\n            <button className=\"flex items-center gap-2 px-4 py-3 hover:bg-blue-50\" type=\"button\" onClick={() => handleAttach('documento')}>\r\n              <Paperclip size={20} /> Documento\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Botão Emoji */}\r\n      <div className=\"relative\">\r\n        <button\r\n          ref={emojiButtonRef}\r\n          type=\"button\"\r\n          className=\"p-2 rounded-full hover:bg-gray-100 transition\"\r\n          title=\"Emoji\"\r\n          onClick={toggleEmoji}\r\n        >\r\n          <Smile size={24} />\r\n        </button>\r\n        {showEmoji && (\r\n          <div\r\n            ref={emojiRef}\r\n            className=\"absolute z-20 bottom-12 left-0 animate-fade-in\"\r\n            style={{ minWidth: 320, maxWidth: 380 }}\r\n          >\r\n            <Picker\r\n              data={data}\r\n              onEmojiSelect={handleEmojiMart}\r\n              theme=\"light\"\r\n              searchPosition=\"top\"\r\n              emojiSize={24}\r\n              emojiButtonSize={36}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Campo de mensagem */}\r\n      <input\r\n        ref={inputRef}\r\n        className=\"flex-1 rounded-lg border px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200 transition\"\r\n        placeholder=\"Digite uma mensagem\"\r\n        value={message}\r\n        onChange={e => setMessage(e.target.value)}\r\n        onKeyDown={handleKeyDown}\r\n        autoComplete=\"off\"\r\n      />\r\n\r\n      {/* Botão Atendimento Humano/Robô */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={toggleHuman}\r\n        className={`p-2 rounded-full border ${human ? 'bg-blue-100 border-blue-400' : 'bg-gray-100 border-gray-300'} transition`}\r\n        title={human ? 'Atendimento Humano' : 'Atendimento Automático'}\r\n      >\r\n        {human ? <User size={22} /> : <Bot size={22} />}\r\n      </button>\r\n\r\n      {/* Botão Enviar */}\r\n      <button\r\n        type=\"submit\"\r\n        disabled={!message.trim()}\r\n        className={`bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 flex items-center justify-center transition ${!message.trim() ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n        title=\"Enviar\"\r\n      >\r\n        <Send size={22} />\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/components/WppLayout.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { WppSidebar } from './WppSidebar'\r\nimport { WppHeader } from './WppHeader'\r\nimport { WppMessages } from './WppMessages'\r\nimport { WppInput } from './WppInput'\r\n\r\ninterface Message {\r\n  id: string\r\n  sender: string\r\n  text: string\r\n  timestamp?: number\r\n}\r\n\r\nconst userId = 'default'\r\n\r\nexport default function WppLayout() {\r\n  const [selectedChat, setSelectedChat] = useState<string | null>(null)\r\n  const [messages, setMessages] = useState<Message[]>([])\r\n  const [contactName, setContactName] = useState<string>('')\r\n  const [erro, setErro] = useState<string>('')\r\n\r\n  // Atualiza mensagens e nome do contato ao trocar de chat\r\n  useEffect(() => {\r\n    if (!selectedChat) {\r\n      setMessages([])\r\n      setContactName('')\r\n      setErro('')\r\n      return\r\n    }\r\n\r\n    // Buscar mensagens do chat selecionado\r\n    fetch(`http://localhost:5000/messages/${selectedChat}?userId=${userId}`)\r\n      .then(res => {\r\n        if (!res.ok) throw new Error('Erro ao buscar mensagens.')\r\n        return res.json()\r\n      })\r\n      .then(msgs => {\r\n        setMessages(Array.isArray(msgs) ? msgs : [])\r\n        setErro('')\r\n      })\r\n      .catch(() => {\r\n        setMessages([])\r\n        setErro('Erro ao buscar mensagens.')\r\n      })\r\n\r\n    // Buscar nome do contato/grupo\r\n    fetch(`http://localhost:5000/chats/${userId}`)\r\n      .then(res => res.json())\r\n      .then(chats => {\r\n        const c = chats.find((c: any) => c.id === selectedChat)\r\n        setContactName(c?.name || selectedChat.split('@')[0] || '')\r\n      })\r\n      .catch(() => setContactName(selectedChat.split('@')[0] || ''))\r\n  }, [selectedChat])\r\n\r\n  // Atualiza mensagens ao enviar\r\n  function handleSend(text: string, system?: boolean) {\r\n    if (!selectedChat) return\r\n\r\n    // Adiciona mensagem localmente (optimistic UI)\r\n    setMessages(m => [\r\n      ...m,\r\n      {\r\n        id: Math.random().toString(36).slice(2),\r\n        sender: system ? 'system' : 'me',\r\n        text,\r\n        timestamp: Math.floor(Date.now() / 1000),\r\n      }\r\n    ])\r\n\r\n    // Envia mensagem real para o backend (se não for mensagem do sistema)\r\n    if (!system) {\r\n      fetch('http://localhost:5000/send', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          userId,\r\n          chatId: selectedChat,\r\n          text,\r\n        })\r\n      }).catch(() => {})\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gradient-to-br from-blue-900 via-gray-900 to-black\">\r\n      <WppSidebar\r\n        userId={userId}\r\n        onSelectChat={setSelectedChat}\r\n        selectedChat={selectedChat}\r\n      />\r\n      <div className=\"flex flex-col flex-1\">\r\n        <WppHeader contactName={contactName} />\r\n        {selectedChat ? (\r\n          <>\r\n            {erro && (\r\n              <div className=\"bg-red-50 text-red-700 text-center font-bold py-2\">\r\n                {erro}\r\n              </div>\r\n            )}\r\n            <WppMessages messages={messages} />\r\n            <WppInput onSend={handleSend} />\r\n          </>\r\n        ) : (\r\n          <div className=\"flex-1 flex items-center justify-center text-gray-400\">\r\n            Selecione uma conversa para começar\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AASA,MAAM,SAAS;AAEA,SAAS;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACvD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEzC,yDAAyD;IACzD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,cAAc;YACjB,YAAY,EAAE;YACd,eAAe;YACf,QAAQ;YACR;QACF;QAEA,uCAAuC;QACvC,MAAM,CAAC,+BAA+B,EAAE,aAAa,QAAQ,EAAE,QAAQ,EACpE,IAAI,CAAC,CAAA;YACJ,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,OAAO,IAAI,IAAI;QACjB,GACC,IAAI,CAAC,CAAA;YACJ,YAAY,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;YAC3C,QAAQ;QACV,GACC,KAAK,CAAC;YACL,YAAY,EAAE;YACd,QAAQ;QACV;QAEF,+BAA+B;QAC/B,MAAM,CAAC,4BAA4B,EAAE,QAAQ,EAC1C,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACJ,MAAM,IAAI,MAAM,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;YAC1C,eAAe,GAAG,QAAQ,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;QAC1D,GACC,KAAK,CAAC,IAAM,eAAe,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;IAC9D,GAAG;QAAC;KAAa;IAEjB,+BAA+B;IAC/B,SAAS,WAAW,IAAY,EAAE,MAAgB;QAChD,IAAI,CAAC,cAAc;QAEnB,+CAA+C;QAC/C,YAAY,CAAA,IAAK;mBACZ;gBACH;oBACE,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC;oBACrC,QAAQ,SAAS,WAAW;oBAC5B;oBACA,WAAW,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;gBACrC;aACD;QAED,sEAAsE;QACtE,IAAI,CAAC,QAAQ;YACX,MAAM,8BAA8B;gBAClC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA,QAAQ;oBACR;gBACF;YACF,GAAG,KAAK,CAAC,KAAO;QAClB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gIAAA,CAAA,aAAU;gBACT,QAAQ;gBACR,cAAc;gBACd,cAAc;;;;;;0BAEhB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,+HAAA,CAAA,YAAS;wBAAC,aAAa;;;;;;oBACvB,6BACC;;4BACG,sBACC,8OAAC;gCAAI,WAAU;0CACZ;;;;;;0CAGL,8OAAC,iIAAA,CAAA,cAAW;gCAAC,UAAU;;;;;;0CACvB,8OAAC,8HAAA,CAAA,WAAQ;gCAAC,QAAQ;;;;;;;qDAGpB,8OAAC;wBAAI,WAAU;kCAAwD;;;;;;;;;;;;;;;;;;AAOjF","debugId":null}},
    {"offset": {"line": 1734, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/bg-solutions/app/pages/painel/page.tsx"],"sourcesContent":["'use client'\r\nimport { useEffect, useState } from \"react\"\r\nimport { supabase } from \"@/utils/supabaseClient\"\r\nimport Header from \"@/app/components/Header\"\r\nimport Sidebar from \"@/app/components/sidebar\"\r\nimport Dashboard from '@/app/components/Dashboard'\r\nimport { QrCodeWpp } from '@/app/components/QrCodeWhatsApp'\r\nimport WppLayout from \"@/app/components/WppLayout\"\r\n\r\nexport default function Painel() {\r\n  const [userId, setUserId] = useState('')\r\n  const [page, setPage] = useState('dashboard')\r\n\r\n  useEffect(() => {\r\n    async function getUserId() {\r\n      try {\r\n        const { data } = await supabase.auth.getUser()\r\n        setUserId(data?.user?.id || '')\r\n      } catch {\r\n        setUserId('')\r\n      }\r\n    }\r\n    getUserId()\r\n  }, [])\r\n\r\n  function renderContent() {\r\n    switch (page) {\r\n      case 'dashboard':\r\n        return <Dashboard />\r\n      case 'qrcode':\r\n        return (\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold mb-3\">Conectar WhatsApp</h2>\r\n            <div className=\"bg-white shadow rounded-lg p-8 text-center\">\r\n              {/* Agora usa usuarioId corretamente */}\r\n              {userId && <QrCodeWpp usuarioId={userId} />}\r\n              {!userId && (\r\n                <div className=\"text-red-600 font-semibold p-6\">\r\n                  Erro ao carregar usuário, faça login novamente.\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )\r\n      case 'whatsapp':\r\n        return <WppLayout />\r\n      case 'crm':\r\n        return <div>CRM de Clientes</div>\r\n      case 'fluxograma':\r\n        return <div>Fluxograma</div>\r\n      case 'config':\r\n        return <div>Configurações</div>\r\n      default:\r\n        return <div>Bem-vindo ao painel!</div>\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      <Header user=\"Gabriel\" onLogout={() => {}} />\r\n      <div className=\"flex flex-1\">\r\n        <Sidebar current={page} onSelect={setPage} />\r\n        <main className=\"flex-1 bg-slate-50 p-0 overflow-auto\">\r\n          {renderContent()}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,eAAe;YACb,IAAI;gBACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,uHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,OAAO;gBAC5C,UAAU,MAAM,MAAM,MAAM;YAC9B,EAAE,OAAM;gBACN,UAAU;YACZ;QACF;QACA;IACF,GAAG,EAAE;IAEL,SAAS;QACP,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,+HAAA,CAAA,UAAS;;;;;YACnB,KAAK;gBACH,qBACE,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,8OAAC;4BAAI,WAAU;;gCAEZ,wBAAU,8OAAC,oIAAA,CAAA,YAAS;oCAAC,WAAW;;;;;;gCAChC,CAAC,wBACA,8OAAC;oCAAI,WAAU;8CAAiC;;;;;;;;;;;;;;;;;;YAO1D,KAAK;gBACH,qBAAO,8OAAC,+HAAA,CAAA,UAAS;;;;;YACnB,KAAK;gBACH,qBAAO,8OAAC;8BAAI;;;;;;YACd,KAAK;gBACH,qBAAO,8OAAC;8BAAI;;;;;;YACd,KAAK;gBACH,qBAAO,8OAAC;8BAAI;;;;;;YACd;gBACE,qBAAO,8OAAC;8BAAI;;;;;;QAChB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,4HAAA,CAAA,UAAM;gBAAC,MAAK;gBAAU,UAAU,KAAO;;;;;;0BACxC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6HAAA,CAAA,UAAO;wBAAC,SAAS;wBAAM,UAAU;;;;;;kCAClC,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX","debugId":null}}]
}